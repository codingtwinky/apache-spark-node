<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Column.html">Column</a><ul class='methods'><li data-type='method'><a href="Column.html#alias">alias</a></li><li data-type='method'><a href="Column.html#and">and</a></li><li data-type='method'><a href="Column.html#as">as</a></li><li data-type='method'><a href="Column.html#asc">asc</a></li><li data-type='method'><a href="Column.html#between">between</a></li><li data-type='method'><a href="Column.html#bitwiseAND">bitwiseAND</a></li><li data-type='method'><a href="Column.html#bitwiseOR">bitwiseOR</a></li><li data-type='method'><a href="Column.html#bitwiseXOR">bitwiseXOR</a></li><li data-type='method'><a href="Column.html#cast">cast</a></li><li data-type='method'><a href="Column.html#contains">contains</a></li><li data-type='method'><a href="Column.html#desc">desc</a></li><li data-type='method'><a href="Column.html#divide">divide</a></li><li data-type='method'><a href="Column.html#endsWith">endsWith</a></li><li data-type='method'><a href="Column.html#eqNullSafe">eqNullSafe</a></li><li data-type='method'><a href="Column.html#equalTo">equalTo</a></li><li data-type='method'><a href="Column.html#explain">explain</a></li><li data-type='method'><a href="Column.html#geq">geq</a></li><li data-type='method'><a href="Column.html#getField">getField</a></li><li data-type='method'><a href="Column.html#getItem">getItem</a></li><li data-type='method'><a href="Column.html#gt">gt</a></li><li data-type='method'><a href="Column.html#isin">isin</a></li><li data-type='method'><a href="Column.html#isNaN">isNaN</a></li><li data-type='method'><a href="Column.html#isNotNull">isNotNull</a></li><li data-type='method'><a href="Column.html#isNull">isNull</a></li><li data-type='method'><a href="Column.html#leq">leq</a></li><li data-type='method'><a href="Column.html#like">like</a></li><li data-type='method'><a href="Column.html#lt">lt</a></li><li data-type='method'><a href="Column.html#minus">minus</a></li><li data-type='method'><a href="Column.html#mod">mod</a></li><li data-type='method'><a href="Column.html#multiply">multiply</a></li><li data-type='method'><a href="Column.html#or">or</a></li><li data-type='method'><a href="Column.html#otherwise">otherwise</a></li><li data-type='method'><a href="Column.html#plus">plus</a></li><li data-type='method'><a href="Column.html#rlike">rlike</a></li><li data-type='method'><a href="Column.html#startsWith">startsWith</a></li><li data-type='method'><a href="Column.html#substr">substr</a></li></ul></li><li><a href="DataFrame.html">DataFrame</a><ul class='methods'><li data-type='method'><a href="DataFrame.html#agg">agg</a></li><li data-type='method'><a href="DataFrame.html#col">col</a></li><li data-type='method'><a href="DataFrame.html#collect">collect</a></li><li data-type='method'><a href="DataFrame.html#collectSync">collectSync</a></li><li data-type='method'><a href="DataFrame.html#columns">columns</a></li><li data-type='method'><a href="DataFrame.html#columnsSync">columnsSync</a></li><li data-type='method'><a href="DataFrame.html#count">count</a></li><li data-type='method'><a href="DataFrame.html#countSync">countSync</a></li><li data-type='method'><a href="DataFrame.html#cube">cube</a></li><li data-type='method'><a href="DataFrame.html#describe">describe</a></li><li data-type='method'><a href="DataFrame.html#distinct">distinct</a></li><li data-type='method'><a href="DataFrame.html#drop">drop</a></li><li data-type='method'><a href="DataFrame.html#dropDuplicates">dropDuplicates</a></li><li data-type='method'><a href="DataFrame.html#except">except</a></li><li data-type='method'><a href="DataFrame.html#explain">explain</a></li><li data-type='method'><a href="DataFrame.html#filter">filter</a></li><li data-type='method'><a href="DataFrame.html#groupBy">groupBy</a></li><li data-type='method'><a href="DataFrame.html#head">head</a></li><li data-type='method'><a href="DataFrame.html#headSync">headSync</a></li><li data-type='method'><a href="DataFrame.html#intersect">intersect</a></li><li data-type='method'><a href="DataFrame.html#isLocal">isLocal</a></li><li data-type='method'><a href="DataFrame.html#join">join</a></li><li data-type='method'><a href="DataFrame.html#limit">limit</a></li><li data-type='method'><a href="DataFrame.html#printSchema">printSchema</a></li><li data-type='method'><a href="DataFrame.html#randomSplit">randomSplit</a></li><li data-type='method'><a href="DataFrame.html#registerTempTable">registerTempTable</a></li><li data-type='method'><a href="DataFrame.html#repartition">repartition</a></li><li data-type='method'><a href="DataFrame.html#rollup">rollup</a></li><li data-type='method'><a href="DataFrame.html#sample">sample</a></li><li data-type='method'><a href="DataFrame.html#select">select</a></li><li data-type='method'><a href="DataFrame.html#selectExpr">selectExpr</a></li><li data-type='method'><a href="DataFrame.html#show">show</a></li><li data-type='method'><a href="DataFrame.html#sort">sort</a></li><li data-type='method'><a href="DataFrame.html#toDF">toDF</a></li><li data-type='method'><a href="DataFrame.html#unionAll">unionAll</a></li><li data-type='method'><a href="DataFrame.html#where">where</a></li><li data-type='method'><a href="DataFrame.html#withColumn">withColumn</a></li><li data-type='method'><a href="DataFrame.html#write">write</a></li></ul></li><li><a href="DataFrameReader.html">DataFrameReader</a><ul class='methods'><li data-type='method'><a href="DataFrameReader.html#json">json</a></li><li data-type='method'><a href="DataFrameReader.html#jsonSync">jsonSync</a></li><li data-type='method'><a href="DataFrameReader.html#option">option</a></li><li data-type='method'><a href="DataFrameReader.html#text">text</a></li><li data-type='method'><a href="DataFrameReader.html#textSync">textSync</a></li></ul></li><li><a href="DataFrameWriter.html">DataFrameWriter</a><ul class='methods'><li data-type='method'><a href="DataFrameWriter.html#insertInto">insertInto</a></li><li data-type='method'><a href="DataFrameWriter.html#insertIntoSync">insertIntoSync</a></li><li data-type='method'><a href="DataFrameWriter.html#json">json</a></li><li data-type='method'><a href="DataFrameWriter.html#jsonSync">jsonSync</a></li><li data-type='method'><a href="DataFrameWriter.html#mode">mode</a></li><li data-type='method'><a href="DataFrameWriter.html#option">option</a></li><li data-type='method'><a href="DataFrameWriter.html#saveAsTable">saveAsTable</a></li><li data-type='method'><a href="DataFrameWriter.html#saveAsTableSync">saveAsTableSync</a></li><li data-type='method'><a href="DataFrameWriter.html#text">text</a></li><li data-type='method'><a href="DataFrameWriter.html#textSync">textSync</a></li></ul></li><li><a href="Functions.html">Functions</a><ul class='methods'><li data-type='method'><a href="Functions.html#.abs">abs</a></li><li data-type='method'><a href="Functions.html#.acos">acos</a></li><li data-type='method'><a href="Functions.html#.add_months">add_months</a></li><li data-type='method'><a href="Functions.html#.approxCountDistinct">approxCountDistinct</a></li><li data-type='method'><a href="Functions.html#.array">array</a></li><li data-type='method'><a href="Functions.html#.array_contains">array_contains</a></li><li data-type='method'><a href="Functions.html#.asc">asc</a></li><li data-type='method'><a href="Functions.html#.ascii">ascii</a></li><li data-type='method'><a href="Functions.html#.asin">asin</a></li><li data-type='method'><a href="Functions.html#.atan">atan</a></li><li data-type='method'><a href="Functions.html#.atan2">atan2</a></li><li data-type='method'><a href="Functions.html#.avg">avg</a></li><li data-type='method'><a href="Functions.html#.base64">base64</a></li><li data-type='method'><a href="Functions.html#.bin">bin</a></li><li data-type='method'><a href="Functions.html#.bitwiseNOT">bitwiseNOT</a></li><li data-type='method'><a href="Functions.html#.broadcast">broadcast</a></li><li data-type='method'><a href="Functions.html#.cbrt">cbrt</a></li><li data-type='method'><a href="Functions.html#.ceil">ceil</a></li><li data-type='method'><a href="Functions.html#.coalesce">coalesce</a></li><li data-type='method'><a href="Functions.html#.col">col</a></li><li data-type='method'><a href="Functions.html#.collect_list">collect_list</a></li><li data-type='method'><a href="Functions.html#.collect_set">collect_set</a></li><li data-type='method'><a href="Functions.html#.column">column</a></li><li data-type='method'><a href="Functions.html#.concat">concat</a></li><li data-type='method'><a href="Functions.html#.concat_ws">concat_ws</a></li><li data-type='method'><a href="Functions.html#.conv">conv</a></li><li data-type='method'><a href="Functions.html#.corr">corr</a></li><li data-type='method'><a href="Functions.html#.cos">cos</a></li><li data-type='method'><a href="Functions.html#.cosh">cosh</a></li><li data-type='method'><a href="Functions.html#.count">count</a></li><li data-type='method'><a href="Functions.html#.countDistinct">countDistinct</a></li><li data-type='method'><a href="Functions.html#.crc32">crc32</a></li><li data-type='method'><a href="Functions.html#.cumeDist">cumeDist</a></li><li data-type='method'><a href="Functions.html#.current_date">current_date</a></li><li data-type='method'><a href="Functions.html#.current_timestamp">current_timestamp</a></li><li data-type='method'><a href="Functions.html#.date_add">date_add</a></li><li data-type='method'><a href="Functions.html#.date_format">date_format</a></li><li data-type='method'><a href="Functions.html#.date_sub">date_sub</a></li><li data-type='method'><a href="Functions.html#.datediff">datediff</a></li><li data-type='method'><a href="Functions.html#.dayofmonth">dayofmonth</a></li><li data-type='method'><a href="Functions.html#.dayofyear">dayofyear</a></li><li data-type='method'><a href="Functions.html#.decode">decode</a></li><li data-type='method'><a href="Functions.html#.denseRank">denseRank</a></li><li data-type='method'><a href="Functions.html#.desc">desc</a></li><li data-type='method'><a href="Functions.html#.encode">encode</a></li><li data-type='method'><a href="Functions.html#.exp">exp</a></li><li data-type='method'><a href="Functions.html#.explode">explode</a></li><li data-type='method'><a href="Functions.html#.expm1">expm1</a></li><li data-type='method'><a href="Functions.html#.expr">expr</a></li><li data-type='method'><a href="Functions.html#.factorial">factorial</a></li><li data-type='method'><a href="Functions.html#.first">first</a></li><li data-type='method'><a href="Functions.html#.floor">floor</a></li><li data-type='method'><a href="Functions.html#.format_number">format_number</a></li><li data-type='method'><a href="Functions.html#.format_string">format_string</a></li><li data-type='method'><a href="Functions.html#.from_unixtime">from_unixtime</a></li><li data-type='method'><a href="Functions.html#.from_utc_timestamp">from_utc_timestamp</a></li><li data-type='method'><a href="Functions.html#.greatest">greatest</a></li><li data-type='method'><a href="Functions.html#.hex">hex</a></li><li data-type='method'><a href="Functions.html#.hour">hour</a></li><li data-type='method'><a href="Functions.html#.hypot">hypot</a></li><li data-type='method'><a href="Functions.html#.initcap">initcap</a></li><li data-type='method'><a href="Functions.html#.inputFileName">inputFileName</a></li><li data-type='method'><a href="Functions.html#.instr">instr</a></li><li data-type='method'><a href="Functions.html#.isNaN">isNaN</a></li><li data-type='method'><a href="Functions.html#.json_tuple">json_tuple</a></li><li data-type='method'><a href="Functions.html#.kurtosis">kurtosis</a></li><li data-type='method'><a href="Functions.html#.lag">lag</a></li><li data-type='method'><a href="Functions.html#.last">last</a></li><li data-type='method'><a href="Functions.html#.last_day">last_day</a></li><li data-type='method'><a href="Functions.html#.lead">lead</a></li><li data-type='method'><a href="Functions.html#.least">least</a></li><li data-type='method'><a href="Functions.html#.length">length</a></li><li data-type='method'><a href="Functions.html#.levenshtein">levenshtein</a></li><li data-type='method'><a href="Functions.html#.lit">lit</a></li><li data-type='method'><a href="Functions.html#.locate">locate</a></li><li data-type='method'><a href="Functions.html#.log">log</a></li><li data-type='method'><a href="Functions.html#.log1p">log1p</a></li><li data-type='method'><a href="Functions.html#.log2">log2</a></li><li data-type='method'><a href="Functions.html#.log10">log10</a></li><li data-type='method'><a href="Functions.html#.lower">lower</a></li><li data-type='method'><a href="Functions.html#.lpad">lpad</a></li><li data-type='method'><a href="Functions.html#.ltrim">ltrim</a></li><li data-type='method'><a href="Functions.html#.max">max</a></li><li data-type='method'><a href="Functions.html#.md5">md5</a></li><li data-type='method'><a href="Functions.html#.mean">mean</a></li><li data-type='method'><a href="Functions.html#.min">min</a></li><li data-type='method'><a href="Functions.html#.minute">minute</a></li><li data-type='method'><a href="Functions.html#.monotonicallyIncreasingId">monotonicallyIncreasingId</a></li><li data-type='method'><a href="Functions.html#.month">month</a></li><li data-type='method'><a href="Functions.html#.months_between">months_between</a></li><li data-type='method'><a href="Functions.html#.nanvl">nanvl</a></li><li data-type='method'><a href="Functions.html#.negate">negate</a></li><li data-type='method'><a href="Functions.html#.next_day">next_day</a></li><li data-type='method'><a href="Functions.html#.not">not</a></li><li data-type='method'><a href="Functions.html#.ntile">ntile</a></li><li data-type='method'><a href="Functions.html#.percentRank">percentRank</a></li><li data-type='method'><a href="Functions.html#.pmod">pmod</a></li><li data-type='method'><a href="Functions.html#.pow">pow</a></li><li data-type='method'><a href="Functions.html#.quarter">quarter</a></li><li data-type='method'><a href="Functions.html#.rand">rand</a></li><li data-type='method'><a href="Functions.html#.randn">randn</a></li><li data-type='method'><a href="Functions.html#.rank">rank</a></li><li data-type='method'><a href="Functions.html#.regexp_extract">regexp_extract</a></li><li data-type='method'><a href="Functions.html#.regexp_replace">regexp_replace</a></li><li data-type='method'><a href="Functions.html#.repeat">repeat</a></li><li data-type='method'><a href="Functions.html#.reverse">reverse</a></li><li data-type='method'><a href="Functions.html#.rint">rint</a></li><li data-type='method'><a href="Functions.html#.round">round</a></li><li data-type='method'><a href="Functions.html#.rowNumber">rowNumber</a></li><li data-type='method'><a href="Functions.html#.rpad">rpad</a></li><li data-type='method'><a href="Functions.html#.rtrim">rtrim</a></li><li data-type='method'><a href="Functions.html#.second">second</a></li><li data-type='method'><a href="Functions.html#.sha1">sha1</a></li><li data-type='method'><a href="Functions.html#.sha2">sha2</a></li><li data-type='method'><a href="Functions.html#.shiftLeft">shiftLeft</a></li><li data-type='method'><a href="Functions.html#.shiftRight">shiftRight</a></li><li data-type='method'><a href="Functions.html#.shiftRightUnsigned">shiftRightUnsigned</a></li><li data-type='method'><a href="Functions.html#.signum">signum</a></li><li data-type='method'><a href="Functions.html#.sin">sin</a></li><li data-type='method'><a href="Functions.html#.sinh">sinh</a></li><li data-type='method'><a href="Functions.html#.size">size</a></li><li data-type='method'><a href="Functions.html#.skewness">skewness</a></li><li data-type='method'><a href="Functions.html#.sort_array">sort_array</a></li><li data-type='method'><a href="Functions.html#.soundex">soundex</a></li><li data-type='method'><a href="Functions.html#.sparkPartitionId">sparkPartitionId</a></li><li data-type='method'><a href="Functions.html#.split">split</a></li><li data-type='method'><a href="Functions.html#.sqrt">sqrt</a></li><li data-type='method'><a href="Functions.html#.stddev">stddev</a></li><li data-type='method'><a href="Functions.html#.stddev_pop">stddev_pop</a></li><li data-type='method'><a href="Functions.html#.stddev_samp">stddev_samp</a></li><li data-type='method'><a href="Functions.html#.struct">struct</a></li><li data-type='method'><a href="Functions.html#.substring">substring</a></li><li data-type='method'><a href="Functions.html#.substring_index">substring_index</a></li><li data-type='method'><a href="Functions.html#.sum">sum</a></li><li data-type='method'><a href="Functions.html#.sumDistinct">sumDistinct</a></li><li data-type='method'><a href="Functions.html#.tan">tan</a></li><li data-type='method'><a href="Functions.html#.tanh">tanh</a></li><li data-type='method'><a href="Functions.html#.to_date">to_date</a></li><li data-type='method'><a href="Functions.html#.to_utc_timestamp">to_utc_timestamp</a></li><li data-type='method'><a href="Functions.html#.toDegrees">toDegrees</a></li><li data-type='method'><a href="Functions.html#.toRadians">toRadians</a></li><li data-type='method'><a href="Functions.html#.translate">translate</a></li><li data-type='method'><a href="Functions.html#.trim">trim</a></li><li data-type='method'><a href="Functions.html#.trunc">trunc</a></li><li data-type='method'><a href="Functions.html#.unbase64">unbase64</a></li><li data-type='method'><a href="Functions.html#.unhex">unhex</a></li><li data-type='method'><a href="Functions.html#.unix_timestamp">unix_timestamp</a></li><li data-type='method'><a href="Functions.html#.upper">upper</a></li><li data-type='method'><a href="Functions.html#.var_pop">var_pop</a></li><li data-type='method'><a href="Functions.html#.var_samp">var_samp</a></li><li data-type='method'><a href="Functions.html#.variance">variance</a></li><li data-type='method'><a href="Functions.html#.weekofyear">weekofyear</a></li><li data-type='method'><a href="Functions.html#.when">when</a></li><li data-type='method'><a href="Functions.html#.year">year</a></li></ul></li><li><a href="GroupedData.html">GroupedData</a><ul class='methods'><li data-type='method'><a href="GroupedData.html#agg">agg</a></li><li data-type='method'><a href="GroupedData.html#avg">avg</a></li><li data-type='method'><a href="GroupedData.html#count">count</a></li><li data-type='method'><a href="GroupedData.html#max">max</a></li><li data-type='method'><a href="GroupedData.html#mean">mean</a></li><li data-type='method'><a href="GroupedData.html#min">min</a></li><li data-type='method'><a href="GroupedData.html#sum">sum</a></li></ul></li><li><a href="SQLContext.html">SQLContext</a><ul class='methods'><li data-type='method'><a href="SQLContext.html#createDataFrame">createDataFrame</a></li><li data-type='method'><a href="SQLContext.html#emptyDataFrame">emptyDataFrame</a></li><li data-type='method'><a href="SQLContext.html#range">range</a></li><li data-type='method'><a href="SQLContext.html#read">read</a></li><li data-type='method'><a href="SQLContext.html#sql">sql</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#sqlContext">sqlContext</a></li><li><a href="global.html#sqlFunctions">sqlFunctions</a></li></ul>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><p><a href="https://travis-ci.org/henridf/apache-spark-node"><img src="https://travis-ci.org/henridf/apache-spark-node.svg?branch=master" alt="Build Status"></a></p>
<h1>Apache Spark &lt;=&gt; Node.js</h1><p>Node.js bindings for Apache Spark DataFrame APIs.</p>
<p><strong>Table of Contents</strong></p>
<ul>
<li><a href="#api-docs">API Docs</a></li>
<li><a href="#status">Status</a></li>
<li><a href="#getting-started">Getting Started</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#examples">Examples</a></li>
<li><a href="#misc-notes">Misc notes</a></li>
</ul>
<h2>API Docs</h2><p>API documentation is <a href="https://henridf.github.io/apache-spark-node">here</a>.</p>
<h2>Status</h2><p>This project is already usable in its present form, but it is still in early
stages and under development. APIs may change.</p>
<p>Notably not yet implemented are:</p>
<ul>
<li>support for user-defined functions</li>
<li>jvm-side helpers to for functions/methods which cannot currently be called
from node (for example because they take parameters types like <code>Seq</code>)</li>
</ul>
<h2>Getting started</h2><h3>Requirements</h3><ul>
<li>Linux or OS X (on Windows, there are currently problems building node add-ons)</li>
<li>Node: Developed with Node 0.12.7. Should work with later versions, but I haven't
tested yet. Feedback from anyone trying out with other versions would be helpful.</li>
<li>Java 8</li>
<li>Spark &gt;= 1.5. You'll need the Spark Assembly jar, which
contains all of the Spark classes. If you don't have an existing
installation, the easiest is to get the binaries from the
<a href="http://spark.apache.org/downloads.html">Spark downloads page</a> (choose
&quot;pre-built for Hadoop 2.6 and later&quot;). Or you can download the Spark sources
and build it yourself. More information
<a href="http://spark.apache.org/docs/latest/building-spark.html">here</a>.</li>
</ul>
<h3>Installing</h3><h4>From NPM</h4><pre class="prettyprint source"><code>$ npm install apache-spark-node</code></pre><h4>From source</h4><p>Clone git repo, then:</p>
<pre class="prettyprint source"><code>$ npm install
$ npm run compile</code></pre><h3>Running</h3><p>Set ASSEMBLY_JAR to the location of your assembly JAR and run <code>spark-node</code> from the directory where you issued <code>npm install apache-spark-node</code>:</p>
<pre class="prettyprint source lang-shell"><code>ASSEMBLY_JAR=/path/to/spark-assembly-1.6.0-SNAPSHOT-hadoop2.2.0.jar node_modules/apache-spark-node/bin/spark-node</code></pre><h3>Docker</h3><p>If you want to play with spark-node but don't want to download the
dependencies or build, you can run it in docker.</p>
<pre class="prettyprint source"><code>$ docker run -it henridf/spark-node</code></pre><p>This will take you to the normal <code>spark-node</code> shell. Optionally, you can map
host volumes to use files on your host system with <code>spark-node</code>. For example</p>
<pre class="prettyprint source"><code>$ docker run -v /var/data:/data -it henridf/spark-node</code></pre><p>will map the host's <code>/var/data</code> directory to <code>/data</code> within the Docker image. This means that you can use</p>
<pre class="prettyprint source"><code>$ var df = sqlContext.read().jsonSync(&quot;/data/people.json&quot;)</code></pre><p>to load a file at <code>/var/data/people.json</code> on the host system.</p>
<h2>Usage</h2><p>(Note: This section is a quick overview of the available APIs in spark-node;
it is not general introduction to Spark or to DataFrames.)</p>
<p>Start the spark-node shell (this assumes you've that you've <code>ASSEMBLY_JAR</code> as
an environment variable):</p>
<pre class="prettyprint source"><code>$ ./bin/spark-node</code></pre><p>A <code>sqlContext</code> global object is available in the shell. Its functions are used to create
DataFrames, register DataFrames as tables, execute SQL over tables, cache
tables, and read parquet files.</p>
<p>To see available command-line options, do <code>./bin/spark-node --help</code>.</p>
<h3>Creating a DataFrame</h3><p>Load a dataframe from a json file:</p>
<pre class="prettyprint source"><code>$ var df = sqlContext.read().jsonSync(&quot;./data/people.json&quot;)</code></pre><p>Load a dataframe from a list of javascript objects:</p>
<pre class="prettyprint source"><code>$ var df = sqlContext.createDataFrame([{&quot;name&quot;:&quot;Michael&quot;}, {&quot;name&quot;:&quot;Andy&quot;, &quot;age&quot;:30}, {&quot;name&quot;:&quot;Justin&quot;, &quot;age&quot;: 19}])</code></pre><p>Pretty-print dataframe contents to stdout:</p>
<pre class="prettyprint source"><code>$ df.show()</code></pre><pre class="prettyprint source"><code>+----+-------+
| age|   name|
+----+-------+
|null|Michael|
|  30|   Andy|
|  19| Justin|
+----+-------+</code></pre><h3>DataFrame Operations</h3><p>Print the dataframe's schema in a tree format:</p>
<pre class="prettyprint source"><code>$ df.printSchema()</code></pre><p>Select only the &quot;name&quot; column:</p>
<pre class="prettyprint source"><code>$ df.select(df.col(&quot;name&quot;)).show()</code></pre><p>or the shorter (equivalent) version:</p>
<pre class="prettyprint source"><code>$ df.select(&quot;name&quot;).show()</code></pre><p>collect the result (as an array of rows) and assign it to a javascript
variable:</p>
<pre class="prettyprint source"><code>$ var res = df.select(&quot;name&quot;).collectSync()</code></pre><p>Select everybody and increment age by 1:</p>
<pre class="prettyprint source"><code>$ df.select(df.col(&quot;name&quot;), df.col(&quot;age&quot;).plus(1)).show()</code></pre><p>Select people older than 21:</p>
<pre class="prettyprint source"><code>$ df.filter(df.col(&quot;age&quot;).gt(21)).show()</code></pre><p>Count people by age:</p>
<pre class="prettyprint source"><code>$ df.groupBy(&quot;age&quot;).count().show()</code></pre><h3>Dataframe functions</h3><p>A <code>sqlFunctions</code> global object is available in the shell. It contains a
variety of built-in functions for operating on dataframes.</p>
<p>For example, to find the minimum and average of &quot;age&quot; across all rows:</p>
<pre class="prettyprint source"><code>$ var F = sqlFunctions;

$ df.agg(F.min(df.col(&quot;age&quot;)), F.avg(df.col(&quot;age&quot;))).show()</code></pre><h3>Running SQL Queries Programmatically</h3><p>Register <code>df</code> as a table named <code>people</code>:</p>
<pre class="prettyprint source"><code>$ df.registerTempTable(&quot;people&quot;)</code></pre><p>Run a SQL query:</p>
<pre class="prettyprint source"><code>$ var teens = sqlContext.sql(&quot;SELECT name FROM people WHERE age >= 13 AND age &lt;= 19&quot;)
$ teens.show()</code></pre><h2>Examples</h2><h4>Word count (aka 'big data hello world')</h4><p>Create dataframe from text file:</p>
<pre class="prettyprint source"><code>$ var lines = sqlContext.read().textSync(&quot;data/words.txt&quot;);</code></pre><p>(<em>Note: support for the &quot;text&quot; format was added in Spark 1.6</em>).</p>
<p>Split strings into arrays:</p>
<pre class="prettyprint source"><code>$ var F = sqlFunctions;
$ var splits = lines.select(F.split(lines.col(&quot;value&quot;), &quot; &quot;).as(&quot;words&quot;));</code></pre><p>Explode the arrays into individual rows:</p>
<pre class="prettyprint source"><code>$ var occurrences = splits.select(F.explode(splits.col(&quot;words&quot;)).as(&quot;word&quot;));</code></pre><p>We now have a dataframe with one row per word occurrence. So we group
and count occurrences of the same word and we're done:</p>
<pre class="prettyprint source"><code>$ var counts = occurrences.groupBy(&quot;word&quot;).count()

$ counts.where(&quot;count>10&quot;).sort(counts.col(&quot;count&quot;)).show()</code></pre><h4>Running <code>spark-node</code> against a standalone cluster</h4><p>When you run <code>bin/spark-node</code> without passing a <code>--master</code> argument, the
spark-node process runs a spark worker in the same process. To run the
spark-node shell against a cluser, use the <code>--master</code> argument. Here's an
example.</p>
<p>On a worker node, do the following:</p>
<pre class="prettyprint source"><code>$ cd path/to/spark/distribution
$ ./sbin/start-master.sh</code></pre><p>Navigate to <code>http://hostname:8080</code> and get the Spark URL (top line), which
will be something like <code>spark://worker_hostname:7077</code>. Then start any number of
slaves on your cluster hosts by running <code>./sbin/start-slave.sh --master &lt;spark_url&gt;</code>.</p>
<p>Then on your client machine:</p>
<pre class="prettyprint source"><code>$ cd path/to/apache-spark-node
$ ./bin/spark-node --master &lt;spark_url></code></pre><p>If you return to the master Web UI (<code>http://hostname:8080</code>), you should now
see an application with name &quot;spark-node shell&quot; under &quot;Running
applications&quot;. Following that link gets you to the Web UI of the node-spark
shell itself.</p>
<h2>Misc notes</h2><p>This was done under the self-imposed constraint of not making modifications to
the spark sources. This results in hacks like the <code>NodeSparkSubmit</code> Scala
class, which are workaround for the fact that we can't add explicit awareness
of this shell to SparkSubmit.</p></article>
    </section>






</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Mon Jan 18 2016 22:01:46 GMT-0800 (PST) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>